# üì° WebNotifications
–ü—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î WebSocket-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –±–∞–∑—ñ FastAPI –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —á–∞—Å—É —Å–ø–æ–≤—ñ—â–µ–Ω—å –∫–ª—ñ—î–Ω—Ç–∞–º. –°–∏—Å—Ç–µ–º–∞ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑'—î–¥–Ω–∞–Ω—å, –≤–∏–≤–µ–¥–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É—Å—ñ–º –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–º –∫–ª—ñ—î–Ω—Ç–∞–º, —Ç–∞ –ø–ª–∞–≤–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏, —è–∫–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö –∑'—î–¥–Ω–∞–Ω—å –∞–±–æ —á–µ—Ä–µ–∑ 30 —Ö–≤ –ø—ñ—Å–ª—è —Å–∏–≥–Ω–∞–ª—É –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É:

```
WebNotifications/
‚îú‚îÄ‚îÄ redis_db/
‚îÇ   ‚îî‚îÄ‚îÄ redis_pubsub.py         # –†–æ–±–æ—Ç–∞ –∑ Redis Pub/Sub
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ http_routes.py          # HTTP API
‚îÇ   ‚îú‚îÄ‚îÄ websocket_routes.py     # WebSocket-—Ä–æ—É—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ static/
‚îÇ       ‚îî‚îÄ‚îÄ index.html          # –¢–µ—Å—Ç–æ–≤–∞ HTML-—Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚îú‚îÄ‚îÄ config.py                   # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ connection_manager.py       # –û–±–ª—ñ–∫ WebSocket-–∑'—î–¥–Ω–∞–Ω—å
‚îú‚îÄ‚îÄ signal_handlers.py          # –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏
‚îú‚îÄ‚îÄ main.py                     # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É FastAPI
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ .gitignore                  # –§–∞–π–ª –¥–ª—è –≤–∏–∫–ª—é—á–µ–Ω–Ω—è –∑–∞–π–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤ –∑ Git
‚îî‚îÄ‚îÄ README.md                   # –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó
```

## ‚öôÔ∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:

### –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:
```
git clone https://github.com/Vasyl-Hlushchenko/WebNotifications
```
### –°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ —Ç–∞ –∞–∫—Ç–∏–≤—É–π—Ç–µ –π–æ–≥–æ:
```
python -m venv venv
source venv/bin/activate  # –î–ª—è Linux/macOS
venv\Scripts\activate     # –î–ª—è Windows
```
### –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```
pip install -r requirements.txt
```

### üê≥ –ó–∞–ø—É—Å—Ç—ñ—Ç—å Redis —É Docker:
```
docker run --name redis-fastapi -p 6379:6379 -d redis
```

#### üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
```
uvicorn main:app --host localhost --port 8050
```
‚ö†Ô∏è –î–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ graceful shutdown –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä –∑ --workers=1. –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ –≤–æ—Ä–∫–µ—Ä—ñ–≤ ‚Äî —á–∏—Ç–∞–π—Ç–µ –ø—Ä–æ –æ–±–º–µ–∂–µ–Ω–Ω—è —É —Ä–æ–∑–¥—ñ–ª—ñ ‚ÄúGraceful Shutdown‚Äù.

#### üîå –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è WebSocket:
1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä.
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —É –±—Ä–∞—É–∑–µ—Ä—ñ —Å—Ç–æ—Ä—ñ–Ω–∫—É: üëâ http://localhost:8050
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫—ñ–ª—å–∫–∞ –≤–∫–ª–∞–¥–æ–∫, —â–æ–± –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ WebSocket-–∫–ª—ñ—î–Ω—Ç—ñ–≤.
4. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞(—á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å).
5. –í–∏ –ø–æ–±–∞—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∞–±–æ –∑–º–æ–∂–µ—Ç–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —ó—Ö –≤—Ä—É—á–Ω—É(—á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å).

#### üß† –õ–æ–≥—ñ–∫–∞ Graceful Shutdown:
##### –ü—ñ–¥ —á–∞—Å –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–∏–≥–Ω–∞–ª—É SIGINT –∞–±–æ SIGTERM (Ctrl+C –∞–±–æ Docker stop):
1. –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –æ–¥—Ä–∞–∑—É.
2. –í—ñ–Ω –æ—á—ñ–∫—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—ñ—Ö WebSocket-–∑'—î–¥–Ω–∞–Ω—å –∞–±–æ –º–∞–∫—Å–∏–º—É–º 30 —Ö–≤–∏–ª–∏–Ω.
–ü—Ä–æ—Ç—è–≥–æ–º —Ü—å–æ–≥–æ —á–∞—Å—É –ª–æ–≥—É—é—Ç—å—Å—è:
- –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑'—î–¥–Ω–∞–Ω—å,
- –∑–∞–ª–∏—à–æ–∫ —á–∞—Å—É –¥–æ –ø—Ä–∏–º—É—Å–æ–≤–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è.
‚úÖ –Ø–∫—â–æ –≤—Å—ñ –∫–ª—ñ—î–Ω—Ç–∏ –≤—ñ–¥'—î–¥–Ω—É—é—Ç—å—Å—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞ ‚Äî —Å–µ—Ä–≤–µ—Ä –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

#### üìå –û–±—Ä–æ–±–∫–∞ –±–∞–≥–∞—Ç—å–æ—Ö workers:
‚ö†Ô∏è –ù–∞ Windows WebSocket-–∑'—î–¥–Ω–∞–Ω–Ω—è –Ω–µ–º–æ–∂–ª–∏–≤–æ –∫–æ–æ—Ä–¥–∏–Ω—É–≤–∞—Ç–∏ –º—ñ–∂ –∫—ñ–ª—å–∫–æ–º–∞ –ø—Ä–æ—Ü–µ—Å–∞–º–∏, —Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä –ª–∏—à–µ –∑ –æ–¥–Ω–∏–º –≤–æ—Ä–∫–µ—Ä–æ–º (--workers 1). –Ü–Ω–∞–∫—à–µ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ –∑–∞–≤–µ—Ä—à–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –º–∏—Ç—Ç—î–≤–æ –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–∏–≥–Ω–∞–ª—É SIGINT –∞–±–æ SIGTERM, –Ω–µ –≤–∏–∫–æ–Ω–∞–≤—à–∏ –∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è.
##### –ù–∞–ø—Ä–∏–∫–ª–∞–¥:
```
uvicorn main:app --host localhost --port 8050 --workers 3
```
#### üì¨ –ó–≤–æ—Ä–æ—Ç–Ω—ñ–π –∑–≤‚Äô—è–∑–æ–∫:
–ó –ø–∏—Ç–∞–Ω–Ω—è–º–∏ –∞–±–æ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—è–º–∏ ‚Äî —Å—Ç–≤–æ—Ä—é–π—Ç–µ issue –∞–±–æ pull request!